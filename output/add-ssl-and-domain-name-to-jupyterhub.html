<!DOCTYPE html>
<html lang="en" prefix="og: http://ogp.me/ns# fb: https://www.facebook.com/2008/fbml">
<head>
    <title>Adding SSL and a domain name to Jupyter Hub - Python for Undergraduate Engineers</title>
    <!-- Using the latest rendering mode for IE -->
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">




<style type="text/css">

/*some stuff for output/input prompts*/
div.cell{border:1px solid transparent;display:-webkit-box;-webkit-box-orient:vertical;-webkit-box-align:stretch;display:-moz-box;-moz-box-orient:vertical;-moz-box-align:stretch;display:box;box-orient:vertical;box-align:stretch;display:flex;flex-direction:column;align-items:stretch}div.cell.selected{border-radius:4px;border:thin #ababab solid}
div.cell.edit_mode{border-radius:4px;border:thin #008000 solid}
div.cell{width:100%;padding:5px 5px 5px 0;margin:0;outline:none}
div.prompt{min-width:11ex;padding:.4em;margin:0;font-family:monospace;text-align:right;line-height:1.21429em}
@media (max-width:480px){div.prompt{text-align:left}}div.inner_cell{display:-webkit-box;-webkit-box-orient:vertical;-webkit-box-align:stretch;display:-moz-box;-moz-box-orient:vertical;-moz-box-align:stretch;display:box;box-orient:vertical;box-align:stretch;display:flex;flex-direction:column;align-items:stretch;-webkit-box-flex:1;-moz-box-flex:1;box-flex:1;flex:1}
div.input_area{border:1px solid #cfcfcf;border-radius:4px;background:#f7f7f7;line-height:1.21429em}
div.prompt:empty{padding-top:0;padding-bottom:0}
div.input{page-break-inside:avoid;display:-webkit-box;-webkit-box-orient:horizontal;-webkit-box-align:stretch;display:-moz-box;-moz-box-orient:horizontal;-moz-box-align:stretch;display:box;box-orient:horizontal;box-align:stretch;}
div.inner_cell{width:90%;}
div.input_area{border:1px solid #cfcfcf;border-radius:4px;background:#f7f7f7;}
div.input_prompt{color:navy;border-top:1px solid transparent;}
div.output_wrapper{margin-top:5px;position:relative;display:-webkit-box;-webkit-box-orient:vertical;-webkit-box-align:stretch;display:-moz-box;-moz-box-orient:vertical;-moz-box-align:stretch;display:box;box-orient:vertical;box-align:stretch;width:100%;}
div.output_scroll{height:24em;width:100%;overflow:auto;border-radius:4px;-webkit-box-shadow:inset 0 2px 8px rgba(0, 0, 0, 0.8);-moz-box-shadow:inset 0 2px 8px rgba(0, 0, 0, 0.8);box-shadow:inset 0 2px 8px rgba(0, 0, 0, 0.8);}
div.output_collapsed{margin:0px;padding:0px;display:-webkit-box;-webkit-box-orient:vertical;-webkit-box-align:stretch;display:-moz-box;-moz-box-orient:vertical;-moz-box-align:stretch;display:box;box-orient:vertical;box-align:stretch;width:100%;}
div.out_prompt_overlay{height:100%;padding:0px 0.4em;position:absolute;border-radius:4px;}
div.out_prompt_overlay:hover{-webkit-box-shadow:inset 0 0 1px #000000;-moz-box-shadow:inset 0 0 1px #000000;box-shadow:inset 0 0 1px #000000;background:rgba(240, 240, 240, 0.5);}
div.output_prompt{color:darkred;}

a.anchor-link:link{text-decoration:none;padding:0px 20px;visibility:hidden;}
h1:hover .anchor-link,h2:hover .anchor-link,h3:hover .anchor-link,h4:hover .anchor-link,h5:hover .anchor-link,h6:hover .anchor-link{visibility:visible;}
/* end stuff for output/input prompts*/


.highlight-ipynb .hll { background-color: #ffffcc }
.highlight-ipynb  { background: #f8f8f8; }
.highlight-ipynb .c { color: #408080; font-style: italic } /* Comment */
.highlight-ipynb .err { border: 1px solid #FF0000 } /* Error */
.highlight-ipynb .k { color: #008000; font-weight: bold } /* Keyword */
.highlight-ipynb .o { color: #666666 } /* Operator */
.highlight-ipynb .cm { color: #408080; font-style: italic } /* Comment.Multiline */
.highlight-ipynb .cp { color: #BC7A00 } /* Comment.Preproc */
.highlight-ipynb .c1 { color: #408080; font-style: italic } /* Comment.Single */
.highlight-ipynb .cs { color: #408080; font-style: italic } /* Comment.Special */
.highlight-ipynb .gd { color: #A00000 } /* Generic.Deleted */
.highlight-ipynb .ge { font-style: italic } /* Generic.Emph */
.highlight-ipynb .gr { color: #FF0000 } /* Generic.Error */
.highlight-ipynb .gh { color: #000080; font-weight: bold } /* Generic.Heading */
.highlight-ipynb .gi { color: #00A000 } /* Generic.Inserted */
.highlight-ipynb .go { color: #888888 } /* Generic.Output */
.highlight-ipynb .gp { color: #000080; font-weight: bold } /* Generic.Prompt */
.highlight-ipynb .gs { font-weight: bold } /* Generic.Strong */
.highlight-ipynb .gu { color: #800080; font-weight: bold } /* Generic.Subheading */
.highlight-ipynb .gt { color: #0044DD } /* Generic.Traceback */
.highlight-ipynb .kc { color: #008000; font-weight: bold } /* Keyword.Constant */
.highlight-ipynb .kd { color: #008000; font-weight: bold } /* Keyword.Declaration */
.highlight-ipynb .kn { color: #008000; font-weight: bold } /* Keyword.Namespace */
.highlight-ipynb .kp { color: #008000 } /* Keyword.Pseudo */
.highlight-ipynb .kr { color: #008000; font-weight: bold } /* Keyword.Reserved */
.highlight-ipynb .kt { color: #B00040 } /* Keyword.Type */
.highlight-ipynb .m { color: #666666 } /* Literal.Number */
.highlight-ipynb .s { color: #BA2121 } /* Literal.String */
.highlight-ipynb .na { color: #7D9029 } /* Name.Attribute */
.highlight-ipynb .nb { color: #008000 } /* Name.Builtin */
.highlight-ipynb .nc { color: #0000FF; font-weight: bold } /* Name.Class */
.highlight-ipynb .no { color: #880000 } /* Name.Constant */
.highlight-ipynb .nd { color: #AA22FF } /* Name.Decorator */
.highlight-ipynb .ni { color: #999999; font-weight: bold } /* Name.Entity */
.highlight-ipynb .ne { color: #D2413A; font-weight: bold } /* Name.Exception */
.highlight-ipynb .nf { color: #0000FF } /* Name.Function */
.highlight-ipynb .nl { color: #A0A000 } /* Name.Label */
.highlight-ipynb .nn { color: #0000FF; font-weight: bold } /* Name.Namespace */
.highlight-ipynb .nt { color: #008000; font-weight: bold } /* Name.Tag */
.highlight-ipynb .nv { color: #19177C } /* Name.Variable */
.highlight-ipynb .ow { color: #AA22FF; font-weight: bold } /* Operator.Word */
.highlight-ipynb .w { color: #bbbbbb } /* Text.Whitespace */
.highlight-ipynb .mf { color: #666666 } /* Literal.Number.Float */
.highlight-ipynb .mh { color: #666666 } /* Literal.Number.Hex */
.highlight-ipynb .mi { color: #666666 } /* Literal.Number.Integer */
.highlight-ipynb .mo { color: #666666 } /* Literal.Number.Oct */
.highlight-ipynb .sb { color: #BA2121 } /* Literal.String.Backtick */
.highlight-ipynb .sc { color: #BA2121 } /* Literal.String.Char */
.highlight-ipynb .sd { color: #BA2121; font-style: italic } /* Literal.String.Doc */
.highlight-ipynb .s2 { color: #BA2121 } /* Literal.String.Double */
.highlight-ipynb .se { color: #BB6622; font-weight: bold } /* Literal.String.Escape */
.highlight-ipynb .sh { color: #BA2121 } /* Literal.String.Heredoc */
.highlight-ipynb .si { color: #BB6688; font-weight: bold } /* Literal.String.Interpol */
.highlight-ipynb .sx { color: #008000 } /* Literal.String.Other */
.highlight-ipynb .sr { color: #BB6688 } /* Literal.String.Regex */
.highlight-ipynb .s1 { color: #BA2121 } /* Literal.String.Single */
.highlight-ipynb .ss { color: #19177C } /* Literal.String.Symbol */
.highlight-ipynb .bp { color: #008000 } /* Name.Builtin.Pseudo */
.highlight-ipynb .vc { color: #19177C } /* Name.Variable.Class */
.highlight-ipynb .vg { color: #19177C } /* Name.Variable.Global */
.highlight-ipynb .vi { color: #19177C } /* Name.Variable.Instance */
.highlight-ipynb .il { color: #666666 } /* Literal.Number.Integer.Long */
</style>

<style type="text/css">
/* Overrides of notebook CSS for static HTML export */
div.entry-content {
  overflow: visible;
  padding: 8px;
}
.input_area {
  padding: 0.2em;
}

a.heading-anchor {
 white-space: normal;
}

.rendered_html
code {
 font-size: .8em;
}

pre.ipynb {
  color: black;
  background: #f7f7f7;
  border: none;
  box-shadow: none;
  margin-bottom: 0;
  padding: 0;
  margin: 0px;
  font-size: 13px;
}

/* remove the prompt div from text cells */
div.text_cell .prompt {
    display: none;
}

/* remove horizontal padding from text cells, */
/* so it aligns with outer body text */
div.text_cell_render {
    padding: 0.5em 0em;
}

img.anim_icon{padding:0; border:0; vertical-align:middle; -webkit-box-shadow:none; -box-shadow:none}

div.collapseheader {
    width=100%;
    padding: 2px;
    cursor: pointer;
    font-family:"Helvetica Neue",Helvetica,Arial,sans-serif;
}

</style>

<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-AMS_HTML"></script>
<script type="text/javascript">
init_mathjax = function() {
    if (window.MathJax) {
        // MathJax loaded
        MathJax.Hub.Config({
            tex2jax: {
                inlineMath: [ ['$','$'], ["\\(","\\)"] ],
                displayMath: [ ['$$','$$'], ["\\[","\\]"] ]
            },
            displayAlign: 'center', // Change this to 'center' to center equations.
            "HTML-CSS": {
                styles: {'.MathJax_Display': {"margin": 0}}
            }
        });
        MathJax.Hub.Queue(["Typeset",MathJax.Hub]);
    }
}
init_mathjax();
</script>
    <link href="./extra/favicon.ico" rel="icon">

<link rel="canonical" href="./add-ssl-and-domain-name-to-jupyterhub.html">

        <meta name="author" content="Peter D. Kazarinoff" />
        <meta name="keywords" content="jupyter,jupyter hub,jupyter notebooks,python" />
        <meta name="description" content="This is the fifth part of a multi-part series that shows how to set up Jupyter Hub for a college class. In this post, we are going to link a domain name to our server IP address, add SSL security and configure nginx to run as a proxy in between users and jupyterhub. Then we&#39;ll run jupyterhub over https using the SSL security we created." />

        <meta property="og:site_name" content="Python for Undergraduate Engineers" />
        <meta property="og:type" content="article"/>
        <meta property="og:title" content="Adding SSL and a domain name to Jupyter Hub"/>
        <meta property="og:url" content="./add-ssl-and-domain-name-to-jupyterhub.html"/>
        <meta property="og:description" content="This is the fifth part of a multi-part series that shows how to set up Jupyter Hub for a college class. In this post, we are going to link a domain name to our server IP address, add SSL security and configure nginx to run as a proxy in between users and jupyterhub. Then we&#39;ll run jupyterhub over https using the SSL security we created."/>
        <meta property="article:published_time" content="2018-05-25" />
            <meta property="article:section" content="jupyter" />
            <meta property="article:tag" content="jupyter" />
            <meta property="article:tag" content="jupyter hub" />
            <meta property="article:tag" content="jupyter notebooks" />
            <meta property="article:tag" content="python" />
            <meta property="article:author" content="Peter D. Kazarinoff" />



    <!-- Bootstrap -->
        <link rel="stylesheet" href="./theme/css/bootstrap.flatly.min.css" type="text/css"/>
    <link href="./theme/css/font-awesome.min.css" rel="stylesheet">

    <link href="./theme/css/pygments/native.css" rel="stylesheet">
    <link href="./theme/tipuesearch/tipuesearch.css" rel="stylesheet">
    <link rel="stylesheet" href="./theme/css/style.css" type="text/css"/>
        <link href="./static/css/custom.css" rel="stylesheet">





</head>
<body>

<div class="navbar navbar-default navbar-fixed-top" role="navigation">
	<div class="container">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-ex1-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a href="./" class="navbar-brand">
Python for Undergraduate Engineers            </a>
        </div>
        <div class="collapse navbar-collapse navbar-ex1-collapse">
            <ul class="nav navbar-nav">
                         <li><a href="./pages/about.html">
                             About
                          </a></li>
                         <li><a href="./pages/book.html">
                             Book
                          </a></li>
                         <li><a href="./pages/now.html">
                             Now
                          </a></li>
            </ul>
            <ul class="nav navbar-nav navbar-right">
              <li><span>
                <form class="navbar-search" action="/search.html">
                  <input type="text" class="search-query" placeholder="Search" name="q" id="tipue_search_input" required>
                </form></span>
              </li>
              <li><a href="./archives.html"><i class="fa fa-th-list"></i><span class="icon-label">Archives</span></a></li>
            </ul>
        </div>
        <!-- /.navbar-collapse -->
    </div>
</div> <!-- /.navbar -->
<!-- Banner -->
<!-- End Banner -->
<div class="container">
    <div class="row">
        <div class="col-sm-9">
            <ol class="breadcrumb">
                <li><a href="." title="Python for Undergraduate Engineers"><i class="fa fa-home fa-lg"></i></a></li>
                <li><a href="./category/jupyter.html" title="jupyter">jupyter</a></li>
                <li class="active">Adding SSL and a domain name to Jupyter Hub</li>
            </ol>
    <section id="content">
        <article>
            <header class="page-header">
                <h1>
                    <a href="./add-ssl-and-domain-name-to-jupyterhub.html"
                       rel="bookmark"
                       title="Permalink to Adding SSL and a domain name to Jupyter Hub">
                        Adding SSL and a domain name to Jupyter Hub
                    </a>
                </h1>
            </header>
            <div class="entry-content">
                <div class="panel">
                    <div class="panel-body">
<footer class="post-info">
    <span class="label label-default">Date</span>
    <span class="published">
        <i class="fa fa-calendar"></i><time datetime="2018-05-25T12:40:00-07:00"> Fri 25 May 2018</time>
    </span>

            <span class="label label-default">Series</span>
            Part 5 of Jupyter Hub




<span class="label label-default">Tags</span>
	<a href="./tag/jupyter.html">jupyter</a>
        /
	<a href="./tag/jupyter-hub.html">jupyter hub</a>
        /
	<a href="./tag/jupyter-notebooks.html">jupyter notebooks</a>
        /
	<a href="./tag/python.html">python</a>
    
</footer><!-- /.post-info -->                    </div>
                </div>
                <p>This is the fifth part of a multi-part series that shows how to set up Jupyter Hub for a college class. In this post, we are going to link a domain name to our server IP address, add SSL security and configure nginx to run as a proxy in between users and <strong>jupyterhub</strong>. Then we'll run <strong>jupyterhub</strong> over https using the SSL security we created.</p>
<h3 id="posts-in-this-series">Posts in this series</h3>
<ol>
<li><a href="./why-jupyter-hub.html">Why Jupyter Hub?</a> </li>
<li><a href="./ssh-keys-with-putty.html">Create ssh key, save to documents/ssh-keys</a></li>
<li><a href="./new-digital-ocean-droplet.html">Create a new Digital Ocean Droplet with a non-root sudo user</a></li>
<li><a href="./installing-jupyter-hub.html">Install Jupyter Hub on the server</a></li>
<li><strong>Apply SSL, link a domain name to the server and configure nginx</strong> (this post)</li>
<li>Connect OAuth to Jupyter Hub</li>
<li>Connect to Jupyter Hub as student</li>
</ol>
<h3 id="last-time">Last time</h3>
<p>In the <a href="({filename}/posts/jupyterhub/installing_jupyterhub.md)">last post</a>, we installed <strong>Anaconda</strong> on the server using a shell script. Then we installed some extra Python packages such as <strong>pint</strong>, <strong>pyserial</strong> and <strong>schemdraw</strong> to our base conda environment. Next we installed <strong>jupyterhub</strong>, opened up port 8000 and ran <strong>jupyterhub</strong> for the first time! And remember <strong>we shut down jupyter hub very quickly</strong> because we ran it without any SSL security.</p>
<h3 id="steps-in-this-post">Steps in this post:</h3>
<ol>
<li>Link domain name to server IP address</li>
<li>Install nginx and modify ufw</li>
<li>Obtain SSL certificates with certbot</li>
<li>Create a cookie secret and a proxy auth token</li>
<li>Modify nginx config</li>
<li>Generate jupyterhub_config.py and modify</li>
<li>Restart nginx and start jupyterhub, see if we can login</li>
<li>Create an new user and restart <strong>jupyterhub</strong>. See if the new user can log in.</li>
</ol>
<p><br></p>
<h3 id="1-link-domain-name-to-server-ip-address">1. Link domain name to server IP address</h3>
<p>When we started Jupyter Hub in the previous post, it ran, we could log in, and we could run Python code. What's not to like, right? Well, security is the big problem. </p>
<p>In the initial setup, Jupyter Hub was running under regular http, not https. With a web application that has usernames and passwords, like Jupyter Hub, having https and SSL security is best (or maybe manditory). In order to use https, we need to get an SSL certificate. And that SSL certificate should correspond to the domain name linked to our server. So the first step is getting the domain name and pointing it at Digital Ocean. The next step is linking the domain name to our Jupyter Hub server.</p>
<h4 id="google-domains">Google Domains</h4>
<p>I purchased the domain <em>problemsolvingwithpython.com</em> from <a href="https://domains.google.com">google domains</a>. It costs $12/year which seems pretty reasonable and was easy to set up. After purchasing the domain, I added the Digital Ocean DNS servers as a set of custom name servers to my domain options on google domains.</p>
<p><img alt="Google Domains Dashboard" src="/posts/jupyterhub/google_domains_list.png"></p>
<p>To add a set of custom name servers, click the button with the two bars under the DNS header. This will bring up a page where you can enter in the Digital Ocean DNS servers. The name servers to add are:</p>
<div class="highlight"><pre><span></span>ns1.digitalocean.com
ns2.digitalocean.com
ns3.digitalocean.com
</pre></div>


<p><img alt="Google Domains Dashboard" src="/posts/jupyterhub/google_domains_dns_routing.png"></p>
<p>Make sure to click the radio button [Use custom name servers] and click [save].</p>
<h4 id="digital-ocean-dns">Digital Ocean DNS</h4>
<p>Now we are going to set our domain <em>problemsolvingwithpython.com</em> to link to the IP address of our server on Digital Ocean. Log into Digital Ocean and in the upper right select [Create] &rarr; [Domains/DNS]</p>
<p><img alt="DO Domains/DNS" src="/posts/jupyterhub/DO_manage_domains.png"></p>
<p>In the [Add a domain] field, type in the domain name without http, but including .com (or .edu/.org/.net) then click [Add Domain].</p>
<p><img alt="DO Domains/DNS" src="/posts/jupyterhub/DO_add_domain.png"></p>
<p>This will bring up a panel where we can add a DNS record. I want the notebook server to have the web address </p>
<p>https://notebooks.problemsovlingwithpython.com</p>
<p>So I entered <code>notebooks</code> in the text field. Then selected the droplet (server) that the web address will to route to.</p>
<p><img alt="DO Domains/DNS" src="/posts/jupyterhub/DO_sub_domain.png"></p>
<p>After completing this step, there will be a number of new DNS records. The ones I set up are below:</p>
<p><img alt="DO Domains/DNS" src="/posts/jupyterhub/DO_domains_routed.png"></p>
<p>It takes a couple minutes for the DNS switchover to complete. <a href="https://www.whatsmydns.net">https://www.whatsmydns.net</a> can be used to check the NS and A records of your domain and see if the domain name is getting through. The first time I set up DNS on Digital Ocean, I added the custom DNS servers to google domains but neglected to select the [use custom name servers] radio button on the google domains dashboard. It looked like the domain was routing to Digital Ocean, but actually the domain was just staying with google. Once I clicked the [use custom name servers] radio button and waited a couple minutes, the change over happened. It did take a bit of time though; not hours, but more than a few minutes.</p>
<p><br></p>
<h3 id="2-install-nginx-and-modify-ufw">2. Install nginx and modify ufw</h3>
<p>Now that the domain name is set up, the next step is to install and configure nginx. Nginx is an open source web server that can handle many concurrent web connections at the same time. For the nginx installation, I followed <a href="https://www.digitalocean.com/community/tutorials/how-to-install-nginx-on-ubuntu-16-04">this tutorial</a> from Digital Ocean.</p>
<p>Use PuTTY to connect to the server with the non-root sudo user we set up before. Once logged in, we can update the system and install nginx.</p>
<div class="highlight"><pre><span></span>$ sudo apt-get update
$ sudo apt-get install nginx
</pre></div>


<p>Digital Ocean installs a firewall application called ufw. Check out which apps the ufw firewall can work with:</p>
<div class="highlight"><pre><span></span>$ sudo ufw app list
</pre></div>


<p>We see a list of available ufw configurations to work with nginx. </p>
<div class="highlight"><pre><span></span>Available applications:
  Nginx Full
  Nginx HTTP
  Nginx HTTPS
  OpenSSH
</pre></div>


<p>We want to allow in both http and https requests. Once a http request comes in, we'll use nginx to convert the http connection to a https connection. Select nginx full. Note the Capitalization in the command:</p>
<div class="highlight"><pre><span></span>$ sudo ufw allow <span class="s1">&#39;Nginx Full&#39;</span>
</pre></div>


<p>We can check out which ports ufw is allowing through with:</p>
<div class="highlight"><pre><span></span>$ sudo ufw status
</pre></div>


<p>Note in the output how ufw is allowing nginx full and requests over port 8000. We opened port 8000 earlier, so we could see how <strong>jupyterhub</strong> works without a domain name or SSL.  Once we get nginx running and hooked up to <strong>jupyterhub</strong>, we need to remember to close off port 8000 in ufw.</p>
<div class="highlight"><pre><span></span><span class="n">Status</span><span class="o">:</span> <span class="n">active</span>

<span class="n">To</span>                         <span class="n">Action</span>      <span class="n">From</span>
<span class="o">--</span>                         <span class="o">------</span>      <span class="o">----</span>
<span class="mi">22</span>                         <span class="n">LIMIT</span>       <span class="n">Anywhere</span>
<span class="mi">2375</span><span class="o">/</span><span class="n">tcp</span>                   <span class="n">ALLOW</span>       <span class="n">Anywhere</span>
<span class="mi">2376</span><span class="o">/</span><span class="n">tcp</span>                   <span class="n">ALLOW</span>       <span class="n">Anywhere</span>
<span class="mi">8000</span>                       <span class="n">ALLOW</span>       <span class="n">Anywhere</span>
<span class="n">Nginx</span> <span class="n">Full</span>                 <span class="n">ALLOW</span>       <span class="n">Anywhere</span>
<span class="mi">22</span> <span class="o">(</span><span class="n">v6</span><span class="o">)</span>                    <span class="n">LIMIT</span>       <span class="n">Anywhere</span> <span class="o">(</span><span class="n">v6</span><span class="o">)</span>
<span class="mi">2375</span><span class="o">/</span><span class="n">tcp</span> <span class="o">(</span><span class="n">v6</span><span class="o">)</span>              <span class="n">ALLOW</span>       <span class="n">Anywhere</span> <span class="o">(</span><span class="n">v6</span><span class="o">)</span>
<span class="mi">2376</span><span class="o">/</span><span class="n">tcp</span> <span class="o">(</span><span class="n">v6</span><span class="o">)</span>              <span class="n">ALLOW</span>       <span class="n">Anywhere</span> <span class="o">(</span><span class="n">v6</span><span class="o">)</span>
<span class="mi">8000</span> <span class="o">(</span><span class="n">v6</span><span class="o">)</span>                  <span class="n">ALLOW</span>       <span class="n">Anywhere</span> <span class="o">(</span><span class="n">v6</span><span class="o">)</span>
<span class="n">Nginx</span> <span class="n">Full</span> <span class="o">(</span><span class="n">v6</span><span class="o">)</span>            <span class="n">ALLOW</span>       <span class="n">Anywhere</span> <span class="o">(</span><span class="n">v6</span><span class="o">)</span>
</pre></div>


<p>Nginx will start running as soon at it is installed. We can see the status with:</p>
<div class="highlight"><pre><span></span>$ sudo systemctl status nginx
</pre></div>


<p>In the output, we should see something like below. This mean nginx is running. Key in [ctrl-c] to exit the status dashboard.</p>
<div class="highlight"><pre><span></span>Active: active (running) since Thu 2018-05-17 04:51:16 UTC; 15min ago
Main PID: 17126 (nginx)
  CGroup: /system.slice/nginx.service
    ├── 17126 nginx: master process /usr/sbin/nginx -g daemon on; master_pr
    └── 17127 nginx: worker process
</pre></div>


<p>Now we can browse over to the domain (the domain we set up with Digital Ocean and google domains) and see the nginx start page.</p>
<p><img alt="nginx welcome page" src="/posts/jupyterhub/welcome_to_nginx.png"></p>
<p><br></p>
<h3 id="3-obtain-ssl-certificates-with-certbot">3. Obtain SSL certificates with certbot</h3>
<p>With a domain name hooked up to our server, we'll now able to obtain an SSL certificate. I followed <a href="https://www.slideshare.net/willingc/jupyterhub-tutorial-at-jupytercon">this presentation</a> to install certbot, a program used to generate SSL certificates. </p>
<div class="highlight"><pre><span></span>$ <span class="nb">cd</span> ~
$ mkdir certbot
$ <span class="nb">cd</span> certbot
$ wget https://dl.eff.org/certbot-auto
$ chmod a+x certbot-auto
</pre></div>


<p>Before we can run certbot, we need to turn off nginx. When I first tried to run certbot, I was thrown an error:</p>
<div class="highlight"><pre><span></span>Problem binding to port 80: Could not bind to IPv4 or IPv6.
</pre></div>


<p>Since we installed nginx earlier, and we confirmed that it's running, that means that port 80 is currently in use by nginx. We need to open up port 80 to certbot by temporarily shutting down nginx. Once nginx is stopped, we can run certbot and get our SSL certificate. We'll eventually have to restart nginx, but this can wait until after we change the nginx configuration file. If you are following along, make sure to change <code>notebooks.problemsolvingwithpython.com</code> to your domain.</p>
<div class="highlight"><pre><span></span>$ sudo systemctl stop nginx
$ sudo systemctl status nginx
<span class="c1"># [Ctrl] + [c] to exit</span>
$ ./certbot-auto certonly --standalone -d notebooks.problemsolvingwithpython.com
</pre></div>


<p>If it worked and we got our SSL certificate, the output will be something like:</p>
<div class="highlight"><pre><span></span>IMPORTANT NOTES:
 - Congratulations! Your certificate and chain have been saved at:
   /etc/letsencrypt/live/notebooks.problemsolvingwithpython.com/fullchain.pem
   Your key file has been saved at:
   /etc/letsencrypt/live/notebooks.problemsolvingwithpython.com/privkey.pem
   Your cert will expire on 2018-08-15. 
</pre></div>


<p>Note the location of the <code>fullchain.pem</code> and <code>privkey.pem</code> files. We'll need to put these locations into the nginx configuration.</p>
<p>We also need to allow nginx to access these files. I had trouble getting nginx to run and <a href="https://www.youtube.com/watch?v=alaGteCPZU8&amp;t=1721s">this presentation</a> showed a way to give nginx access to the SSL key files. There is probably a more "Linuxy" way of giving nginx access to the cert files, but I messed around with the permission settings for a while, and this way worked.</p>
<div class="highlight"><pre><span></span>$ <span class="nb">cd</span> /etc/letsencrypt
$ ls
accounts  archive  csr  keys  live  renewal  renewal-hooks
$ sudo chmod <span class="m">777</span> -R archive/
$ sudo chmod <span class="m">777</span> -R live/
</pre></div>


<p><br></p>
<h3 id="4-create-a-cookie-secret-and-a-proxy-auth-token">4. Create a cookie secret and a proxy auth token</h3>
<p>In addition to the SSL certificate, the <a href="http://jupyterhub.readthedocs.io/en/latest/getting-started/security-basics.html">Jupyter Hub docs on security basics</a> specify that a cookie secret and poxy auth token should be created. To create the cookie secret:</p>
<div class="highlight"><pre><span></span>$ <span class="nb">cd</span> /srv
$ mkdir jupyterhub
$ <span class="nb">cd</span> jupyterhub
$ sudo touch jupyterhub_cookie_secret
$ sudo chown :sudo jupyterhub_cookie_secret
$ sudo chmod g+rw jupyterhub_cookie_secret
$ sudo openssl rand -hex <span class="m">32</span> &gt; jupyterhub_cookie_secret
$ ls
jupyterhub_cookie_secret
$ sudo chmod <span class="m">600</span> jupyterhub_cookie_secret
$ ls -l
-rw------- <span class="m">1</span> root sudo <span class="m">65</span> Sep <span class="m">14</span> <span class="m">17</span>:41 jupyterhub_cookie_secret
</pre></div>


<p>I had trouble with the cookie secret file because I missed where the <a href="http://jupyterhub.readthedocs.io/en/latest/getting-started/security-basics.html#generating-and-storing-as-a-cookie-secret-file">jupyterhub docs</a> show:</p>
<blockquote>
<p>The file must not be readable by group or other or the server won’t start. The recommended permissions for the cookie secret file are 600 (owner-only rw).</p>
</blockquote>
<p>Now we have a cookie secret file. We need to make note of the location because we'll add this location to the jupyterhub_config.py file later.</p>
<p>To generate the proxy auth token, we can use the same set of commands, but point to a different file. </p>
<div class="highlight"><pre><span></span>$ <span class="nb">pwd</span>
<span class="c1"># should be in /srv/jupyterhub</span>
$ sudo touch proxy_auth_token
$ sudo chown :sudo proxy_auth_token
$ sudo chmod g+rw proxy_auth_token
$ sudo openssl rand -hex <span class="m">32</span> &gt; proxy_auth_token
$ ls
jupyterhub_cookie_secret  proxy_auth_token
$ sudo chmod <span class="m">600</span> proxy_auth_token
$ ls -l
-rw------- <span class="m">1</span> root sudo <span class="m">65</span> Sep <span class="m">14</span> <span class="m">17</span>:41 jupyterhub_cookie_secret
-rw------- <span class="m">1</span> root sudo <span class="m">65</span> Sep <span class="m">14</span> <span class="m">17</span>:47 proxy_auth_token
</pre></div>


<p>Now if we list the contents of <code>~/srv/jupyterhub</code> we should see:</p>
<div class="highlight"><pre><span></span>/srv/jupyterhub/
├── jupyterhub_cookie_secret
└── proxy_auth_token
</pre></div>


<p>Also we can generate a dhparam.pem file. I'm not exactly sure what the dhparam.pem file is, but I think it's good for security. First we need to <code>cd</code> into the <code>/srv/jupyterhub</code> directory. Next  <code>touch</code> a new file called dhparam.pem. After that we can use <code>chown</code> and <code>chmod</code> to be able to write to the dhparams.pem file. The <code>openssl dhparam</code> command is used to generate the .pem file. Finally we modify the permissions again to <code>600</code> (owner-only rw). Note the location of this file as we will add it to the nginx config file.</p>
<div class="highlight"><pre><span></span>$ <span class="nb">cd</span> /srv/jupyterhub
$ sudo touch dhparam.pem
$ sudo chown :sudo dhparam.pem
$ sudo chmod g+rw dhparam.pem
$ sudo openssl dhparam -out /srv/jupyterhub/dhparam.pem <span class="m">2048</span>
$ sudo chmod <span class="m">600</span> dhparam.pem
$ ls -l
-rw------- <span class="m">1</span> root sudo <span class="m">424</span> Sep <span class="m">14</span> <span class="m">17</span>:59 dhparam.pem
-rw------- <span class="m">1</span> root sudo  <span class="m">65</span> Sep <span class="m">14</span> <span class="m">17</span>:41 jupyterhub_cookie_secret
-rw------- <span class="m">1</span> root sudo  <span class="m">65</span> Sep <span class="m">14</span> <span class="m">17</span>:47 proxy_auth_token
</pre></div>


<p><br></p>
<h3 id="5-modify-nginx-config">5. Modify nginx config</h3>
<p>The next step is to modify the nginx config file so that nginx uses our SSL certificates and routes requests on to <strong>jupyterhub</strong>. This was the hardest part for me when I set up the first server. The nginx config file isn't Python code or a bash script. I went through many different configurations until I got one that worked. </p>
<p>The big initial problem was that I copied the sample nginx config that's up on the Jupyter Hub docs. But the nginx config posted on the <strong>jupyterhub</strong> docs is not a complete nginx config, it contains just the server portion. I didn't know that the whole server portion needed to be enclosed in another frame.</p>
<p>To modify <code>nginx.conf</code>, <code>cd</code> into the <code>/etc/nginx</code> directory. The nginx.conf file should be there along with a couple other files and directories.</p>
<div class="highlight"><pre><span></span>$ <span class="nb">cd</span> /etc/nginx
$ ls
conf.d          koi-utf     nginx.conf    sites-available  ssl
fastcgi.conf    koi-win     proxy_params  sites-enabled    uwsgi_params
fastcgi_params  mime.types  scgi_params   snippets         win-utf
$ sudo nano nginx.conf
</pre></div>


<p>The nginx config that eventually worked for me is below. It can also be found <a href="https://github.com/ProfessorKazarinoff/jupyterhub-svr/blob/master/nginx.conf">here</a>:</p>
<p>Note the line which shows the path to the SSL certificates. This will change based on your domain and where certbot saved the .pem files to.</p>
<div class="highlight"><pre><span></span>## Based on: https://github.com/calpolydatascience/jupyterhub-deploy-data301/blob/master/roles/nginx/templates/nginx.conf.j2

user www-data;
worker_processes 4;
pid /run/nginx.pid;

events {
        worker_connections 1024;
        # multi_accept on;
}

http {
        include /etc/nginx/mime.types;

        default_type application/octet-stream;

    #top-level http config for websocket headers
    # from https://github.com/jupyterhub/jupyterhub/blob/master/docs/source/referen$
    map $http_upgrade $connection_upgrade {
        default upgrade;
            &#39;&#39;      close;
    }


    # All regular http requests on port 80 become SSL/HTTPS requests on port 32
    server {
        listen 80;
        server_name notebooks.problemsolving101withpython.com;

        # Tell all requests to port 80 to be 302 redirected to HTTPS
        return 302 https://$host$request_uri;
    }

    server {
        #listen 443 ssl default_server;
        listen 443;
        ssl on;
        server_name notebooks.problemsovling101withpython.com;

        ## SSL Protocals
        ssl_certificate /etc/letsencrypt/live/notebooks.problemsolving101withpython.com/fullchain.pem;
        ssl_certificate_key /etc/letsencrypt/live/notebooks.problemsolving101withpython.com/privkey.pem;

        ssl_protocols TLSv1 TLSv1.1 TLSv1.2;
        ssl_prefer_server_ciphers on;
        ssl_dhparam /srv/jupyterhub/dhparam.pem;

        # Make site accessible from http://localhost/
        #server_name localhost;

        # certs sent to the client in SERVER HELLO are concatenated in
        ssl_session_timeout 1d;
        ssl_session_cache shared:SSL:50m;
        ssl_stapling on;
        ssl_stapling_verify on;

        # modern configuration. tweak to your needs.
        ssl_ciphers &#39;ECDHE-ECDSA-AES256-GCM-SHA384:ECDHE-RSA-AES256-GCM-SHA384:ECDHE-ECDSA-CHACHA20-POLY1305:ECDHE-RSA-CHACHA20-POLY1305:ECDHE-ECDSA-AES128-GCM-SHA256:ECDHE-ECDSA-AES256-SHA384:ECDHE-RSA-AES256-SHA384:ECDHE-ECDSA-AES128-SHA256:ECDHE-RSA-AES128-SHA256&#39;;

        # HSTS (ngx_http_headers_module is required) (15768000 seconds = 6 months)
        add_header Strict-Transport-Security max-age=15768000;

        location / {
            proxy_pass http://127.0.0.1:8000;
            proxy_set_header X-Real-IP $remote_addr;
            proxy_set_header Host $host;
            proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
            proxy_set_header X-NginX-Proxy true;

            #proxy_http_version 1.1;
            proxy_set_header Upgrade $http_upgrade;
            proxy_set_header Connection &quot;upgrade&quot;;
        }

        location ~ /.well-known {
            allow all;
        }
    }
}
</pre></div>


<p>Save and exit with [Ctrl] + [c] and [y]</p>
<p><br></p>
<h3 id="6-generate-jupyterhub_configpy-and-modify">6. Generate jupyterhub_config.py and modify</h3>
<p>Next, we'll generate a jupyterhub_config.py file and modify it a little bit. </p>
<div class="highlight"><pre><span></span>$ <span class="nb">cd</span> ~
$ jupyterhub --generate-config
</pre></div>


<p>Now we'll modify the jupyterhub_config.py file to allow local spawners and include our user <code>peter</code> as an admin user:</p>
<div class="highlight"><pre><span></span>$ nano jupyterhub_config.py
</pre></div>


<p>There will be a lot of commented out text in the file. At the top of the file, add the following:</p>
<div class="highlight"><pre><span></span><span class="c1">#jupyterhub_config.py</span>

<span class="kn">import</span> <span class="nn">os</span>
<span class="n">c</span> <span class="o">=</span> <span class="n">get_config</span><span class="p">()</span>
<span class="n">c</span><span class="o">.</span><span class="n">JupyterHub</span><span class="o">.</span><span class="n">log_level</span> <span class="o">=</span> <span class="mi">10</span>
<span class="n">c</span><span class="o">.</span><span class="n">Spawner</span><span class="o">.</span><span class="n">cmd</span> <span class="o">=</span> <span class="s1">&#39;/home/peter/anaconda3/bin/jupyterhub-singleuser&#39;</span>

<span class="c1"># Cookie Secret Files</span>
<span class="n">c</span><span class="o">.</span><span class="n">JupyterHub</span><span class="o">.</span><span class="n">cookie_secret_file</span> <span class="o">=</span> <span class="s1">&#39;/srv/jupyterhub/jupyterhub_cookie_secret&#39;</span>
<span class="n">c</span><span class="o">.</span><span class="n">ConfigurableHTTPProxy</span><span class="o">.</span><span class="n">auth_token</span> <span class="o">=</span> <span class="s1">&#39;/srv/jupyterhub/proxy_auth_token&#39;</span>

<span class="n">c</span><span class="o">.</span><span class="n">Authenticator</span><span class="o">.</span><span class="n">whitelist</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;peter&#39;</span><span class="p">}</span>
<span class="n">c</span><span class="o">.</span><span class="n">Authenticator</span><span class="o">.</span><span class="n">admin_users</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;peter&#39;</span><span class="p">}</span>
</pre></div>


<p><br></p>
<h3 id="7-restart-nginx-and-start-jupyterhub-see-if-we-can-login">7. Restart nginx and start jupyterhub, see if we can login</h3>
<p>Now we'll restart nginx and start jupyterhub. Not that this time when we start jupyter hub we don't need to use the <code>--no-ssl</code> flag because we have SSL running on nginx. If it seems like nginx isn't working, try <code>$ sudo systemctl status nginx</code> and see if nginx really started. If it didn't, try the command <code>nginx -t</code>. This will print out any error messages if nginx failed to start. I had to do this many different times before I got nginx to work.</p>
<div class="highlight"><pre><span></span>$ sudo systemctl stop nginx
$ sudo systemctl start nginx
$ sudo systemctl status nginx
<span class="c1"># [ctrl-c] to exit</span>
</pre></div>


<p>Restart the jupyterhub without the <code>--no-ssl</code> flag.</p>
<div class="highlight"><pre><span></span>$ <span class="nb">cd</span> ~
$ jupyterhub
</pre></div>


<p>Log in with the non-root sudo username and password (same user that's running the PuTTY session). Now we can browse to our domain and see Jupyter Hub running in its full SSL glory.</p>
<p><br></p>
<h3 id="8-create-an-new-user-and-restart-jupyterhub-see-if-the-new-user-can-log-in">8. Create an new user and restart <strong>jupyterhub</strong>. See if the new user can log in.</h3>
<p>OK, it's all well and good that we can log into <strong>jupyterhub</strong>. But the purpose of setting of this up is for multiple students to be able to log into <strong>jupyterhub</strong>. If <strong>jupyterhub</strong> is still running, it can be stopped with [Ctrl] + [c].  Let's create a new user and see if we can log in as her.</p>
<div class="highlight"><pre><span></span>$ sudo adduser kendra
</pre></div>


<p>Go through the prompts and remember the UNIX password. Now we'll modify jupyterhub_conf.py to include our new user <code>kendra</code> and add <code>peter</code> (our non-root sudo user) as an administrator:</p>
<div class="highlight"><pre><span></span>c.Authenticator.whitelist = {&#39;peter&#39;,&#39;kendra&#39;}
c.Authenticator.admin_users = {&#39;peter&#39;}
</pre></div>


<p>Restart <strong>jupyterhub</strong> and try and login as <code>kendra</code></p>
<div class="highlight"><pre><span></span>$ jupyterhub
</pre></div>


<p>Amazing! right? Jupyter Hub running on our own domain using SSL security and https. Pretty cool. </p>
<p><br></p>
<h3 id="summary">Summary</h3>
<p>In this post we created an SSL certificate with certbot. We modified the nginx config to use our SSL certificate and modified jupyterhub_config.py. At the end of all of that we were able to get a working version of <strong>jupyterhub</strong> running on https using SSL security and can log into <strong>jupyterhub</strong> as two different users.</p>
<p><br></p>
<h3 id="next-steps">Next Steps</h3>
<p>Up next will add an authentication system so that users can log into our Jupyter Hub server using their college usernames and passwords. We will also set <strong>jupyterhub</strong> to run as a system service in the background which will allow us to work on the server and run <strong>jupyterhub</strong> at the same time.</p>
            </div>
            <!-- /.entry-content -->
<section class="well" id="related-posts">
    <h4>Related Posts:</h4>
    <ul>
        <li><a href="./first-live-results-running-jupyter-hub.html">First Live Results Running Jupyter Hub in a College Class</a></li>
        <li><a href="./assignments-dir-and-custom-login-page-to-jupyterhub.html">Add a custom login page and assignments directory for each user on a Jupyter Hub server</a></li>
        <li><a href="./add-google-oauth-and-system-service-to-jupyterhub.html">Adding Google OAuth and system service to a Jupyter Hub server</a></li>
        <li><a href="./installing-jupyter-hub.html">Installing Jupyterhub</a></li>
        <li><a href="./new-digital-ocean-droplet.html">Creating a new Digital Ocean Droplet</a></li>
    </ul>
</section>
<section class="well" id="related-posts">
    <h4>Article 5 of the Jupyter Hub series</h4>
       <h5>Previous articles</h5>
       <ul>
           <li><a href="./why-jupyter-hub.html">Why Jupyter Hub?</a></li>
           <li><a href="./ssh-keys-with-putty.html">Create an SSH Key with PuTTYgen</a></li>
           <li><a href="./new-digital-ocean-droplet.html">Creating a new Digital Ocean Droplet</a></li>
           <li><a href="./installing-jupyter-hub.html">Installing Jupyterhub</a></li>
       </ul>
       <h5>Next articles</h5>
       <ul>
           <li><a href="./add-google-oauth-and-system-service-to-jupyterhub.html">Adding Google OAuth and system service to a Jupyter Hub server</a></li>
           <li><a href="./assignments-dir-and-custom-login-page-to-jupyterhub.html">Add a custom login page and assignments directory for each user on a Jupyter Hub server</a></li>
           <li><a href="./first-live-results-running-jupyter-hub.html">First Live Results Running Jupyter Hub in a College Class</a></li>
       </ul>
</section>
        </article>
    </section>

        </div>
        <div class="col-sm-3" id="sidebar">
            <aside>
<div id="aboutme">
        <p>
            <img width="100%" class="img-thumbnail" src="./extra/gear-wrench-icon-512-278694.png"/>
        </p>
    <p>
      <strong>About Peter Kazarinoff</strong><br/>
        I teach engineering at a community college in the Pacific Northwest. I am interested in programming and how to help students. Here I mostly blog about Python, MATLAB and how programing can be incorporated into engineering education.
    </p>
</div><!-- Sidebar -->
<section class="well well-sm">
  <ul class="list-group list-group-flush">

<!-- Sidebar/Recent Posts -->
<li class="list-group-item">
  <h4><i class="fa fa-home fa-lg"></i><span class="icon-label">Recent Posts</span></h4>
  <ul class="list-group" id="recentposts">
    <li class="list-group-item"><a href="./statistics-in-python-using-the-statistics-module.html">Statistics in Python using the statistics module</a></li>
    <li class="list-group-item"><a href="./sympy-two-equations-for-two-unknows-and-statics-problem.html">Solving Two Equations for Two Unknowns and a Statics Problem with SymPy and Python</a></li>
    <li class="list-group-item"><a href="./sympy-expressions-and-equations.html">Solving Equations and Writing Expressions with SymPy and Python</a></li>
  </ul>
</li>
<!-- End Sidebar/Recent Posts -->

<!-- Sidebar/Tag Cloud -->
<li class="list-group-item">
  <a href="./"><h4><i class="fa fa-tags fa-lg"></i><span class="icon-label">Tags</span></h4></a>
  <ul class="list-group list-inline tagcloud" id="tags">
    <li class="list-group-item tag-4">
      <a href="./tag/esp8266.html">esp8266</a>
    </li>
    <li class="list-group-item tag-4">
      <a href="./tag/flask.html">flask</a>
    </li>
    <li class="list-group-item tag-4">
      <a href="./tag/iot.html">IoT</a>
    </li>
    <li class="list-group-item tag-2">
      <a href="./tag/jupyter.html">jupyter</a>
    </li>
    <li class="list-group-item tag-3">
      <a href="./tag/jupyter-hub.html">jupyter hub</a>
    </li>
    <li class="list-group-item tag-3">
      <a href="./tag/jupyter-notebooks.html">jupyter notebooks</a>
    </li>
    <li class="list-group-item tag-4">
      <a href="./tag/micropython.html">micropython</a>
    </li>
    <li class="list-group-item tag-4">
      <a href="./tag/pelican.html">pelican</a>
    </li>
    <li class="list-group-item tag-1">
      <a href="./tag/python.html">python</a>
    </li>
    <li class="list-group-item tag-3">
      <a href="./tag/sensor.html">sensor</a>
    </li>
  </ul>
</li>
<!-- End Sidebar/Tag Cloud -->

<!-- Sidebar/Series -->
<li class="list-group-item">
  <h4><i class="fa fa-tags fa-lg"></i><span class="icon-label">Series</span></h4>
  <ul class="list-group">
    <li class="list-group-item">
      <h5></i>Previous article</h5>
      <a href="./installing-jupyter-hub.html">Installing Jupyterhub</a>
    </li>
    <li class="list-group-item">
      <h5>Next article</h5>
      <a href="./add-google-oauth-and-system-service-to-jupyterhub.html">Adding Google OAuth and system service to a Jupyter Hub server</a>
    </li>
  </ul>
</li>
<!-- End Sidebar/Series -->


<!-- Sidebar/Github -->
<li class="list-group-item">
  <h4><i class="fa fa-github fa-lg"></i><span class="icon-label">GitHub Repos</span></h4>
  <div id="gh_repos">
    <p class="list-group-item">Status updating...</p>
  </div>
  <a href="https://github.com/professorkazarinoff">@professorkazarinoff</a> on GitHub
</li>
<!-- End Sidebar/Github -->
  </ul>
</section>
<!-- End Sidebar -->            </aside>
        </div>
    </div>
</div>
<footer>
   <div class="container">
      <hr>
      <div class="row">
         <div class="col-xs-10">&copy; 2018 Peter Kazarinoff
            &middot; Powered by <a href="https://github.com/getpelican/pelican-themes/tree/master/pelican-bootstrap3" target="_blank">pelican-bootstrap3</a>,
            <a href="http://docs.getpelican.com/" target="_blank">Pelican</a>,
            <a href="http://getbootstrap.com" target="_blank">Bootstrap</a>         </div>
         <div class="col-xs-2"><p class="pull-right"><i class="fa fa-arrow-up"></i> <a href="#">Back to top</a></p></div>
      </div>
   </div>
</footer>
<script src="./theme/js/jquery.min.js"></script>

<!-- Include all compiled plugins (below), or include individual files as needed -->
<script src="./theme/js/bootstrap.min.js"></script>

<!-- Enable responsive features in IE8 with Respond.js (https://github.com/scottjehl/Respond) -->
<script src="./theme/js/respond.min.js"></script>

    <script src="./static/js/custom.js"></script>


<!-- GitHub JS Code -->
<script type="text/javascript">
$(document).ready(function () {
  if (!window.jXHR) {
    var jxhr = document.createElement('script');
    jxhr.type = 'text/javascript';
    jxhr.src = './theme/js/jXHR.js';
    var s = document.getElementsByTagName('script')[0];
    s.parentNode.insertBefore(jxhr, s);
  }

  github.showRepos({
    user: 'professorkazarinoff',
    count: 5,
    skip_forks: true,
    target: '#gh_repos'
  });
});
</script>
<script src="./theme/js/github.js" type="text/javascript"></script>
<!-- End GitHub JS Code -->
    <!-- Google Analytics -->
    <script type="text/javascript">

        var _gaq = _gaq || [];
        _gaq.push(['_setAccount', 'UA-116330557-1']);
        _gaq.push(['_trackPageview']);

        (function () {
            var ga = document.createElement('script');
            ga.type = 'text/javascript';
            ga.async = true;
            ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
            var s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(ga, s);
        })();
    </script>
    <!-- End Google Analytics Code -->

<script type="text/javascript">
jQuery(document).ready(function($) {
    $("div.collapseheader").click(function () {
    $header = $(this).children("span").first();
    $codearea = $(this).children(".input_area");
    console.log($(this).children());
    $codearea.slideToggle(500, function () {
        $header.text(function () {
            return $codearea.is(":visible") ? "Collapse Code" : "Expand Code";
        });
    });
});
});
</script>
</body>
</html>